(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[380],{660:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(43),r=n(475),o=n(753),s=n(167),i=n(210),l=n(579);const c=()=>{const{firebaseApp:e}=(0,a.useContext)(o.A),{user:t}=(0,a.useContext)(s.A);return(0,l.jsx)("header",{className:"h-16 bg-white border-b border-gray-primary mb-8",children:(0,l.jsx)("div",{className:"container mx-auto max-w-screen-lg h-full",children:(0,l.jsxs)("div",{className:"flex justify-between h-full",children:[(0,l.jsx)("div",{className:"text-gray-700 text-center flex items-center cursor-pointer",children:(0,l.jsx)("h1",{className:"flex justify-center w-full",children:(0,l.jsx)(r.N_,{to:i.$Q,"aria-label":"Instagram logo",children:(0,l.jsx)("img",{src:"/images/Instagram_logo.svg.png",alt:"Instagram",className:"mt-2 w-2/12"})})})}),(0,l.jsx)("div",{className:"text-gray-700 text-center flex items-center align-items",children:t?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.N_,{to:i.$Q,"aria-label":"Dashboard",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 mr-6 text-black-light cursor-pointer",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}),(0,l.jsx)("button",{type:"button",title:"Sign out",onClick:()=>e.auth().signOut(),onKeyDown:t=>{"Enter"===t.key&&e.auth().signOut()},children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 mr-6 text-black-light cursor-pointer",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})})}),(0,l.jsx)("div",{className:"flex items-center w-8 h-8 cursor-pointer",children:(0,l.jsx)(r.N_,{to:"/p/".concat(t.displayName),children:(0,l.jsx)("img",{className:"rounded-full h-8 w-8 flex",src:"/images/avatars/".concat(t.displayName,".jpg"),alt:"".concat(t.displayName," profile")})})})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.N_,{to:i.S3,children:(0,l.jsx)("button",{type:"button",className:"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8",children:"Log In"})}),(0,l.jsx)(r.N_,{to:i.OE,children:(0,l.jsx)("button",{type:"button",className:"font-bold text-sm rounded text-blue-medium w-20 h-8",children:"Sign Up"})})]})})]})})})}},154:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(43),r=n(167),o=n(600);function s(){const[e,t]=(0,a.useState)({}),{user:n}=(0,a.useContext)(r.A);return(0,a.useEffect)((()=>{null!==n&&void 0!==n&&n.uid&&async function(){const[e]=await(0,o.JP)(n.uid);t(e)}()}),[n]),{user:e}}},380:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var a=n(43),r=n(660),o=n(154),s=n(372),i=n(475),l=n(579);const c=e=>{let{username:t,fullName:n}=e;return t&&n?(0,l.jsxs)(i.N_,{to:"/p/".concat(t),className:"grid grid-cols-4 gap-4 mb-6 items-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-between col-span-1",children:(0,l.jsx)("img",{className:"rounded-full w-16 flex mr-3",src:"/images/avatars/".concat(t,".jpg"),alt:""})}),(0,l.jsxs)("div",{className:"col-span-3",children:[(0,l.jsx)("p",{className:"font-bold text-sm",children:t}),(0,l.jsx)("p",{className:"text-sm",children:n})]})]}):(0,l.jsx)(s.A,{count:1,height:61})},d=(0,a.memo)(c);c.whyDidYouRender=!0;var u=n(600),m=n(173),h=n.n(m);const f=e=>{let{profileDocId:t,username:n,profileId:r,userId:o,loggedInUserDocId:s}=e;const[c,d]=(0,a.useState)(!1);return c?null:(0,l.jsxs)("div",{className:"flex flex-grow items-center align-items justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("img",{className:"rounded-full w-8 flex mr-3",src:"/images/avatars/".concat(n,".jpg"),alt:""}),(0,l.jsx)(i.N_,{to:"/p/".concat(n),children:(0,l.jsx)("p",{className:"font-bold text-sm",children:n})})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"text-xs font-bold text-blue-medium",type:"button",onClick:async function(){d(!0),await(0,u.p_)(s,r,!1),await(0,u.kO)(t,o,!1)},children:"Follow"})})]})},g=e=>{let{userId:t,following:n,loggedInUserDocId:r}=e;const[o,i]=(0,a.useState)(null);return(0,a.useEffect)((()=>{t&&async function(){const e=await(0,u.UD)(t,n);i(e)}()}),[t,n]),o?(0,l.jsxs)("div",{className:"rounded flex flex-col",children:[(0,l.jsx)("div",{className:"text-sm flex items-center align-items",children:(0,l.jsx)("p",{className:"font-bold text-gray-base",children:"Suggestion for you"})}),(0,l.jsx)("div",{className:"mt-4 grid gap-5",children:o.map((e=>(0,l.jsx)(f,{profileDocId:e.docId,username:e.username,profileId:e.userId,userId:t,loggedInUserDocId:r},e.docId)))})]}):(0,l.jsx)(s.A,{count:1,height:150,className:"mt-5"})},p=g;g.prototype={userId:h().string,following:h().array,loggedInUserDocId:h().string};const x=()=>{const{user:{docId:e,fullName:t,username:n,userId:a,following:r}}=(0,o.A)();return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)(d,{username:n,fullName:t}),(0,l.jsx)(p,{userId:a,following:r,loggedInUserDocId:e})]})},y=(0,a.memo)(x);var b=n(167);const v=e=>{let{username:t}=e;return(0,l.jsx)("div",{className:"flex border-b border-gray-primary h-4 p-4 py-8",children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)(i.N_,{className:"flex items-center",to:"./p/".concat(t),children:[(0,l.jsx)("img",{className:"rounded-full h-8 w-8 flex mr-3",src:"/images/avatars/".concat(t,".jpg"),alt:"".concat(t," profile ")}),(0,l.jsx)("p",{className:"font-bold",children:t})]})})})},w=e=>{let{src:t,caption:n}=e;return(0,l.jsx)("img",{src:t,alt:n})};var j=n(753);const N=e=>{var t;let{docId:n,totalLikes:r,likedPhoto:o,handleFocus:s}=e;const i=(0,a.useContext)(b.A),c=(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.uid)||" ",[d,u]=(0,a.useState)(o),[m,h]=(0,a.useState)(r),{firebaseApp:f,FieldValue:g}=(0,a.useContext)(j.A),p=async()=>{u((e=>!e)),await f.firestore().collection("photos").doc(n).update({likes:d?g.arrayRemove(c):g.arrayUnion(c)}),h((e=>d?e-1:e+1))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex justify-between p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("svg",{onClick:p,onKeyDown:e=>{"Enter"===e.key&&p()},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 mr-4 select-none cursor-pointer ".concat(d?"fill-red text-red-primary":"text-black-light"),children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})}),(0,l.jsx)("svg",{onClick:s,onKeyDown:e=>{"Enter"===e.key&&s()},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 text-black-light select-none cursor-pointer",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})})]})}),(0,l.jsx)("div",{className:"p-4 py-0",children:(0,l.jsx)("p",{className:"font-bold",children:"".concat(m,m<=1?" like":" likes")})})]})},k=e=>{let{username:t,caption:n}=e;return(0,l.jsxs)("div",{className:"p-4 pt-2 pb-0",children:[(0,l.jsx)("span",{className:"mr-1 font-bold",children:t}),(0,l.jsx)("span",{className:"",children:n})]})};function M(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function I(e,t){const n=M(e),a=M(t),r=n.getTime()-a.getTime();return r<0?-1:r>0?1:r}Math.pow(10,8);const D=43200;function C(e,t){const n=M(e),a=M(t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}function S(e){const t=M(e);return t.setHours(23,59,59,999),t}function P(e){const t=M(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function W(e){const t=M(e);return+S(t)===+P(t)}function A(e,t){const n=M(e),a=M(t),r=I(n,a),o=Math.abs(C(n,a));let s;if(o<1)s=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*o);let t=I(n,a)===-r;W(M(e))&&1===o&&1===I(e,a)&&(t=!1),s=r*(o-Number(t))}return 0===s?0:s}function T(e,t){return+M(e)-+M(t)}function F(e,t,n){const a=T(e,t)/1e3;return(r=null===n||void 0===n?void 0:n.roundingMethod,e=>{const t=(r?Math[r]:Math.trunc)(e);return 0===t?0:t})(a);var r}const E={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function O(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const _={date:O({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:O({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:O({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},X={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function L(e){return(t,n)=>{let a;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=null!==n&&void 0!==n&&n.width?String(n.width):t;a=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;a=e.values[r]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function U(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;const s=o[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(i,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(i,(e=>e.test(s)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}var Y;const R={code:"en-US",formatDistance:(e,t,n)=>{let a;const r=E[e];return a="string"===typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:_,formatRelative:(e,t,n,a)=>X[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:L({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:L({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:L({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:L({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:L({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Y={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Y.matchPattern);if(!n)return null;const a=n[0],r=e.match(Y.parsePattern);if(!r)return null;let o=Y.valueCallback?Y.valueCallback(r[0]):r[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(a.length)}}),era:U({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:U({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:U({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:U({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:U({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let J={};function H(){return J}function V(e){const t=M(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function q(e,t,n){var a,r;const o=H(),s=null!==(a=null!==(r=null===n||void 0===n?void 0:n.locale)&&void 0!==r?r:o.locale)&&void 0!==a?a:R,i=I(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:null===n||void 0===n?void 0:n.addSuffix,comparison:i});let c,d;i>0?(c=M(t),d=M(e)):(c=M(e),d=M(t));const u=F(d,c),m=(V(d)-V(c))/1e3,h=Math.round((u-m)/60);let f;if(h<2)return null!==n&&void 0!==n&&n.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,l):u<10?s.formatDistance("lessThanXSeconds",10,l):u<20?s.formatDistance("lessThanXSeconds",20,l):u<40?s.formatDistance("halfAMinute",0,l):u<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):0===h?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",h,l);if(h<45)return s.formatDistance("xMinutes",h,l);if(h<90)return s.formatDistance("aboutXHours",1,l);if(h<1440){const e=Math.round(h/60);return s.formatDistance("aboutXHours",e,l)}if(h<2520)return s.formatDistance("xDays",1,l);if(h<D){const e=Math.round(h/1440);return s.formatDistance("xDays",e,l)}if(h<86400)return f=Math.round(h/D),s.formatDistance("aboutXMonths",f,l);if(f=A(d,c),f<12){const e=Math.round(h/D);return s.formatDistance("xMonths",e,l)}{const e=f%12,t=Math.trunc(f/12);return e<3?s.formatDistance("aboutXYears",t,l):e<9?s.formatDistance("overXYears",t,l):s.formatDistance("almostXYears",t+1,l)}}const B=e=>{var t;let{docId:n,comments:r,setComments:o,commentInput:s}=e;const[i,c]=(0,a.useState)(""),{firebaseApp:d,FieldValue:u}=(0,a.useContext)(j.A),m=(0,a.useContext)(b.A),h=(null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.displayName)||" ",f=e=>(e.preventDefault(),o([{displayName:h,comment:i},...r]),c(""),d.firestore().collection("photos").doc(n).update({comments:u.arrayUnion({displayName:h,comment:i})}));return(0,l.jsx)("div",{className:"border-t border-gray-primary",children:(0,l.jsxs)("form",{className:"flex justify-between pl-0 pr-5",method:"POST",onSubmit:e=>i.length>=1?f(e):e.preventDefault(),children:[(0,l.jsx)("input",{"aria-label":"Add a comment",autoComplete:"off",className:"text-sm text-gray-base w-full mr-3 py-5 px-4",type:"text",name:"add-comment",placeholder:"Add a comment...",value:i,onChange:e=>{let{target:t}=e;return c(t.value)},ref:s}),(0,l.jsx)("button",{className:"text-sm font-bold text-blue-medium",onClick:f,type:"button",disabled:i.length<1,children:"Post"})]})})},z=e=>{let{docId:t,comments:n,posted:r,commentInput:o}=e;const[s,c]=(0,a.useState)(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"p-4 pt-1 pb-4",children:[s.length>=3&&(0,l.jsxs)("p",{className:"text-sm text-gray-base mb-1 cursor-pointer",children:["View all ",s.length," comments"]}),s.slice(0,3).map((e=>(0,l.jsxs)("p",{children:[(0,l.jsx)(i.N_,{to:"/p/".concat(e.displayName),children:(0,l.jsx)("span",{className:"mr-1 font-bold",children:e.displayName})}),(0,l.jsx)("span",{children:e.comment})]},"".concat(e.comment,"-").concat(e.displayName)))),(0,l.jsxs)("p",{className:"text-gray-base uppercase text-xs mt-2",children:[q(r,new Date)," ago"]})]}),(0,l.jsx)(B,{docId:t,comments:s,setComments:c,commentInput:o})]})},Q=e=>{let{content:t}=e;const n=(0,a.useRef)(null);return(0,l.jsxs)("div",{className:"rounded bg-white col-span-4 border border-gray-primary mb-16",children:[(0,l.jsx)(v,{username:t.username}),(0,l.jsx)(w,{src:t.imageSrc,caption:t.caption}),(0,l.jsx)(N,{docId:t.docId,totalLikes:t.likes.length,likedPhoto:t.userLikedPhoto,handleFocus:()=>n.current.focus()}),(0,l.jsx)(k,{username:t.username,caption:t.caption}),(0,l.jsx)(z,{docId:t.docId,posted:t.dateCreated,comments:t.comments,commentInput:n})]})},Z=()=>{const{photos:e}=function(){var e;const[t,n]=(0,a.useState)(null),r=(0,a.useContext)(b.A),o=(null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.uid)||" ";return(0,a.useEffect)((()=>{!async function(){if(o&&" "!==o){const[{following:e}]=await(0,u.JP)(o);let t=[];e.length>0&&(t=await(0,u.i$)(o,e),t.sort(((e,t)=>t.dateCreated-e.dateCreated)),n(t))}}()}),[o]),{photos:t}}();return(0,l.jsx)("div",{className:"container col-span-2",children:e?(null===e||void 0===e?void 0:e.length)>0?e.map((e=>(0,l.jsx)(Q,{content:e},e.docId))):(0,l.jsx)("p",{className:"text-center text-2xl",children:"Follow people to see photos"}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.A,{count:4,width:640,height:500,className:"mb-5"})})})},K=()=>((0,a.useEffect)((()=>{document.title="Instagram"})),(0,l.jsxs)("div",{className:"bg-gray-background",children:[(0,l.jsx)(r.A,{}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg",children:[(0,l.jsx)(Z,{}),(0,l.jsx)(y,{})]})]}))},600:(e,t,n)=>{"use strict";n.d(t,{JE:()=>o,JP:()=>s,K3:()=>m,So:()=>h,UD:()=>i,i$:()=>d,j7:()=>u,kO:()=>c,lP:()=>r,p_:()=>l});var a=n(474);async function r(e){return(await a.x.firestore().collection("users").where("username","==",e).get()).docs.map((e=>e.data().length>0))}async function o(e){const t=(await a.x.firestore().collection("users").where("username","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})));return t.length>0&&t}async function s(e){return(await a.x.firestore().collection("users").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function i(e,t){return(await a.x.firestore().collection("users").limit(10).get()).docs.map((e=>({...e.data(),docId:e.id}))).filter((n=>n.userId!==e&&!t.includes(n.userId)))}async function l(e,t,n){return a.x.firestore().collection("users").doc(e).update({following:n?a.S.arrayRemove(t):a.S.arrayUnion(t)})}async function c(e,t,n){return a.x.firestore().collection("users").doc(e).update({followers:n?a.S.arrayRemove(t):a.S.arrayUnion(t)})}async function d(e,t){const n=(await a.x.firestore().collection("photos").where("userId","in",t).get()).docs.map((e=>({...e.data(),docId:e.id})));return await Promise.all(n.map((async t=>{let n=!1;t.likes.includes(e)&&(n=!0);const a=await s(t.userId),{username:r}=a[0];return{username:r,...t,userLikedPhoto:n}})))}async function u(e){const[t]=await o(e);return(await a.x.firestore().collection("photos").where("userId","==",t.userId).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function m(e,t){const n=await a.x.firestore().collection("users").where("username","==",e).where("following","array-contains",t).get(),[r={}]=n.docs.map((e=>({...e.data(),docId:e.id})));return r.userId}async function h(e,t,n,a,r){await l(t,a,e),await c(n,r,e)}},497:(e,t,n)=>{"use strict";var a=n(218);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},372:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(43);const r=a.createContext({}),o=!0;function s(e){let{baseColor:t,highlightColor:n,width:a,height:r,borderRadius:s,circle:i,direction:l,duration:c,enableAnimation:d=o}=e;const u={};return"rtl"===l&&(u["--animation-direction"]="reverse"),"number"===typeof c&&(u["--animation-duration"]="".concat(c,"s")),d||(u["--pseudo-element-display"]="none"),"string"!==typeof a&&"number"!==typeof a||(u.width=a),"string"!==typeof r&&"number"!==typeof r||(u.height=r),"string"!==typeof s&&"number"!==typeof s||(u.borderRadius=s),i&&(u.borderRadius="50%"),"undefined"!==typeof t&&(u["--base-color"]=t),"undefined"!==typeof n&&(u["--highlight-color"]=n),u}function i(e){let{count:t=1,wrapper:n,className:i,containerClassName:l,containerTestId:c,circle:d=!1,style:u,...m}=e;var h,f,g;const p=a.useContext(r),x={...m};for(const[a,r]of Object.entries(m))"undefined"===typeof r&&delete x[a];const y={...p,...x,circle:d},b={...u,...s(y)};let v="react-loading-skeleton";i&&(v+=" ".concat(i));const w=null!==(h=y.inline)&&void 0!==h&&h,j=[],N=Math.ceil(t);for(let r=0;r<N;r++){let e=b;if(N>t&&r===N-1){const n=null!==(f=e.width)&&void 0!==f?f:"100%",a=t%1,r="number"===typeof n?n*a:"calc(".concat(n," * ").concat(a,")");e={...e,width:r}}const n=a.createElement("span",{className:v,style:e,key:r},"\u200c");w?j.push(n):j.push(a.createElement(a.Fragment,{key:r},n,a.createElement("br",null)))}return a.createElement("span",{className:l,"data-testid":c,"aria-live":"polite","aria-busy":null!==(g=y.enableAnimation)&&void 0!==g?g:o},n?j.map(((e,t)=>a.createElement(n,{key:t},e))):j)}}}]);
//# sourceMappingURL=380.4b7949dc.chunk.js.map