"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[674],{674:(e,a,r)=>{r.r(a),r.d(a,{default:()=>c});var t=r(43),s=r(216),n=r(475),o=r(753),l=r(210),i=r(600),d=r(579);const c=()=>{const e=(0,s.Zp)(),{firebaseApp:a}=(0,t.useContext)(o.A),[r,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[x,h]=(0,t.useState)(""),[y,w]=(0,t.useState)(""),g=""===x||""===p;return(0,t.useEffect)((()=>{document.title="Sign Up - Instagram"}),[]),(0,d.jsxs)("div",{className:"container flex mx-auto max-w-screen-md items-center h-screen ",children:[(0,d.jsx)("div",{className:"flex w-3/5",children:(0,d.jsx)("img",{src:"/images/iphone-with-profile.jpg",alt:"iphone with instagram"})}),(0,d.jsxs)("div",{className:"flex flex-col w-2/5",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center bg-white p-4 border border-gray-primary mb-4 rounded",children:[(0,d.jsx)("h1",{className:"flex justify-center w-full",children:(0,d.jsx)("img",{src:"./images/Instagram_logo.svg.png",alt:"Instagram",className:"mt-2 w-6/12 mb-4"})}),y&&(0,d.jsx)("p",{className:"mb-4 text-xs text-red-primary",children:y}),(0,d.jsxs)("form",{onSubmit:async t=>{t.preventDefault();if((await(0,i.lP)(r)).length)w("That username is already taken, please try another.");else try{const t=await a.auth().createUserWithEmailAndPassword(p,x);await t.user.updateProfile({displayName:r}),await a.firestore().collection("users").add({userId:t.user.uid,username:r.toLowerCase(),fullName:u,emailAddress:p.toLowerCase(),followers:[],following:[],dateCreated:Date.now()}),e(l.$Q)}catch(y){m(""),c(""),f(""),h(""),w(y.message)}},method:"POST",children:[(0,d.jsx)("input",{"aria-label":"Enter your userName",type:"text",placeholder:"Username",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 outline-none border border-gray-primary rounded mb-2",onChange:e=>{let{target:a}=e;return c(a.value)},value:r}),(0,d.jsx)("input",{"aria-label":"Enter your full name",type:"text",placeholder:"Full name",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 outline-none border border-gray-primary rounded mb-2",onChange:e=>{let{target:a}=e;return m(a.value)},value:u}),(0,d.jsx)("input",{"aria-label":"Enter your email address",type:"text",placeholder:"Email address",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 outline-none border border-gray-primary rounded mb-2",onChange:e=>{let{target:a}=e;return f(a.value)},value:p}),(0,d.jsx)("input",{"aria-label":"Enter your password ",type:"password",placeholder:"Password",className:"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 outline-none border border-gray-primary rounded mb-2",onChange:e=>{let{target:a}=e;return h(a.value)},value:x}),(0,d.jsx)("button",{disabled:g,type:"submit",className:"bg-blue-medium text-white w-full rounded h-8 font-bold ".concat(g&&"opacity-50"),children:"Sign Up"})]})]}),(0,d.jsx)("div",{className:"flex justify-center items-center flex-col w-full bg-white p-4 border border-gray-primary rounded",children:(0,d.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,d.jsx)(n.N_,{to:l.S3,className:"font-bold text-blue-medium",children:"Login"})]})})]})]})}},600:(e,a,r)=>{r.d(a,{JE:()=>n,JP:()=>o,K3:()=>m,So:()=>p,UD:()=>l,i$:()=>c,j7:()=>u,kO:()=>d,lP:()=>s,p_:()=>i});var t=r(474);async function s(e){return(await t.x.firestore().collection("users").where("username","==",e).get()).docs.map((e=>e.data().length>0))}async function n(e){const a=(await t.x.firestore().collection("users").where("username","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})));return a.length>0&&a}async function o(e){return(await t.x.firestore().collection("users").where("userId","==",e).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function l(e,a){return(await t.x.firestore().collection("users").limit(10).get()).docs.map((e=>({...e.data(),docId:e.id}))).filter((r=>r.userId!==e&&!a.includes(r.userId)))}async function i(e,a,r){return t.x.firestore().collection("users").doc(e).update({following:r?t.S.arrayRemove(a):t.S.arrayUnion(a)})}async function d(e,a,r){return t.x.firestore().collection("users").doc(e).update({followers:r?t.S.arrayRemove(a):t.S.arrayUnion(a)})}async function c(e,a){const r=(await t.x.firestore().collection("photos").where("userId","in",a).get()).docs.map((e=>({...e.data(),docId:e.id})));return await Promise.all(r.map((async a=>{let r=!1;a.likes.includes(e)&&(r=!0);const t=await o(a.userId),{username:s}=t[0];return{username:s,...a,userLikedPhoto:r}})))}async function u(e){const[a]=await n(e);return(await t.x.firestore().collection("photos").where("userId","==",a.userId).get()).docs.map((e=>({...e.data(),docId:e.id})))}async function m(e,a){const r=await t.x.firestore().collection("users").where("username","==",e).where("following","array-contains",a).get(),[s={}]=r.docs.map((e=>({...e.data(),docId:e.id})));return s.userId}async function p(e,a,r,t,s){await i(a,t,e),await d(r,s,e)}}}]);
//# sourceMappingURL=674.4dfed6a7.chunk.js.map